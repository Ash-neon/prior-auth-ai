# Prior Authorization AI Platform - Environment Configuration
# Copy this file to .env and update with your values

# ==================== Application ====================
APP_NAME=PriorAuth AI
APP_ENV=development
DEBUG=true
LOG_LEVEL=INFO

# Secret key for JWT token generation (CHANGE THIS IN PRODUCTION!)
# Generate with: openssl rand -hex 32
SECRET_KEY=your-secret-key-here-change-this-in-production-use-openssl-rand

# ==================== Database ====================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=priorauth
POSTGRES_USER=priorauth_user
POSTGRES_PASSWORD=changeme

# Full database URL (auto-constructed from above)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# ==================== Redis ====================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Full Redis URL
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# ==================== Object Storage (MinIO/S3) ====================
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=documents
MINIO_USE_SSL=false
MINIO_REGION=us-east-1

# For production S3 (uncomment and configure)
# S3_BUCKET=your-production-bucket
# S3_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key

# ==================== AI Services ====================
# Anthropic Claude API
ANTHROPIC_API_KEY=sk-ant-api03-your-api-key-here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
ANTHROPIC_MAX_TOKENS=4096
ANTHROPIC_TEMPERATURE=0.3

# ==================== Fax Services ====================
# Twilio Fax (Primary)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_FAX_NUMBER=

# eFax API (Alternative)
EFAX_API_KEY=
EFAX_API_SECRET=
EFAX_ACCOUNT_ID=

# ==================== Payer APIs ====================
# Availity
AVAILITY_CLIENT_ID=
AVAILITY_CLIENT_SECRET=
AVAILITY_API_URL=https://api.availity.com

# CoverMyMeds
COVERMYMEDS_API_KEY=
COVERMYMEDS_API_SECRET=

# Surescripts
SURESCRIPTS_ACCOUNT_ID=
SURESCRIPTS_USERNAME=
SURESCRIPTS_PASSWORD=

# ==================== Email Configuration ====================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@priorauth.ai
SMTP_FROM_NAME=PriorAuth AI
SMTP_USE_TLS=true

# ==================== Frontend URLs ====================
FRONTEND_URL=http://localhost:3000
BACKEND_URL=http://localhost:8000

# ==================== CORS ====================
CORS_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_ALLOW_CREDENTIALS=true

# ==================== JWT Configuration ====================
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ==================== Rate Limiting ====================
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=1000

# ==================== File Upload ====================
MAX_UPLOAD_SIZE_MB=50
ALLOWED_UPLOAD_EXTENSIONS=pdf,jpg,jpeg,png,doc,docx

# ==================== Celery ====================
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}
CELERY_TASK_TIME_LIMIT=600
CELERY_TASK_SOFT_TIME_LIMIT=540

# ==================== OCR ====================
TESSERACT_PATH=/usr/bin/tesseract
OCR_LANGUAGE=eng
OCR_DPI=300

# ==================== Monitoring & Logging ====================
# Sentry (Optional)
SENTRY_DSN=

# Datadog (Optional)
DATADOG_API_KEY=
DATADOG_APP_KEY=

# ==================== Feature Flags ====================
ENABLE_WEB_SEARCH=true
ENABLE_AI_EXTRACTION=true
ENABLE_RPA_PORTALS=false
ENABLE_PAYER_APIS=false
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_SMS_NOTIFICATIONS=false

# ==================== Security ====================
# HIPAA Compliance
ENABLE_AUDIT_LOGGING=true
ENABLE_PHI_ENCRYPTION=true
PHI_ENCRYPTION_KEY=your-phi-encryption-key-here-change-this

# Session Security
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax

# ==================== Performance ====================
# Database Connection Pool
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# Redis Connection Pool
REDIS_POOL_SIZE=10

# Worker Concurrency
CELERY_WORKER_CONCURRENCY=4

# ==================== Development Tools ====================
# pgAdmin
PGADMIN_EMAIL=admin@priorauth.ai
PGADMIN_PASSWORD=changeme

# Flower (Celery Monitoring)
FLOWER_PORT=5555
FLOWER_BASIC_AUTH=admin:changeme

# ==================== Testing ====================
# Test Database
TEST_DATABASE_URL=postgresql://priorauth_user:changeme@localhost:5432/priorauth_test

# ==================== Production Overrides ====================
# Uncomment and configure for production deployment

# Production Database (RDS, Cloud SQL, etc.)
# PROD_DATABASE_URL=postgresql://user:pass@prod-db.example.com:5432/priorauth

# Production Redis (ElastiCache, Cloud Memorystore, etc.)
# PROD_REDIS_URL=redis://prod-redis.example.com:6379/0

# Production S3
# PROD_S3_BUCKET=priorauth-prod-documents
# PROD_S3_REGION=us-east-1

# Production Secrets (use AWS Secrets Manager, GCP Secret Manager, etc.)
# SECRETS_MANAGER_ARN=arn:aws:secretsmanager:us-east-1:123456789012:secret:priorauth-prod

# ==================== Notes ====================
# 1. Never commit this file with real credentials to Git
# 2. Use different secrets for each environment (dev, staging, prod)
# 3. Rotate secrets regularly
# 4. Use a secrets manager in production (AWS Secrets Manager, HashiCorp Vault, etc.)
# 5. Ensure PHI_ENCRYPTION_KEY is securely stored and backed up
# 6. For HIPAA compliance, enable audit logging and PHI encryption in production